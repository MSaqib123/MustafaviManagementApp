import*as t from"../highcharts.js";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a:a}),a},d:(t,a)=>{for(var i in a)e.o(a,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:a[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};let a=t.default;var i=e.n(a);let d=i()["defaultOptions"],s=i()["noop"],{addEvent:l,extend:o,isObject:n,merge:r,relativeLength:h}=i(),p={radius:0,scope:"stack",where:void 0};function c(t,e){return n(t)||(t={radius:t||0}),r(p,e,t)}let u=t.default.SeriesRegistry;var g=e.n(u);let{composed:x,noop:y}=i(),{column:b,pie:f}=g().seriesTypes,{addEvent:L,correctFloat:m,extend:v,fireEvent:M,isArray:W,merge:A,pick:C,pushUnique:P,relativeLength:k,splat:w}=i(),O=g().series.prototype.alignDataLabel;function D(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)}class I extends f{alignDataLabel(t,e,a,i,d){let s=t.series,o=s.options.reversed,n=t.dlBox||t.shapeArgs,{align:l,padding:r=0,verticalAlign:h}=a,p=((s.options||{}).dataLabels||{}).inside,c=s.center[1],g=t.plotY||0,u=e.height??e.getBBox().height,y=s.getWidthAt((o?2*c-g:g)-n.height/2+u),x="middle"===h?(n.topWidth-n.bottomWidth)/4:(y-n.bottomWidth)/2,b=n.y,f=n.x;"middle"===h?b=n.y-n.height/2+u/2:"top"===h&&(b=n.y-n.height+u+r),("top"===h&&!o||"bottom"===h&&o||"middle"===h)&&("right"===l?f=n.x-r+x:"left"===l&&(f=n.x+r-x)),i={x:f,y:o?b-n.height:b,width:n.bottomWidth,height:n.height},a.verticalAlign="bottom",p&&(a.distance=void 0),p&&t.visible&&O.call(s,t,e,a,i,d),p&&(!t.visible&&t.dataLabel&&(t.dataLabel.placed=!1),t.contrastColor&&e.css({color:t.contrastColor}))}drawDataLabels(){(w(this.options.dataLabels||{})[0].inside?b:f).prototype.drawDataLabels.call(this)}getDataLabelPosition(t,e){var a=t.plotY||0,i=t.half?1:-1,d=this.getX(a,!!t.half,t);return{distance:e,natural:{x:0,y:a},computed:{},alignment:t.half?"right":"left",connectorPosition:{breakAt:{x:d+(e-5)*i,y:a},touchingSliceAt:{x:d+e*i,y:a}}}}translate(){let i=this,t=i.chart,e=i.options,n=e.reversed,a=e.ignoreHiddenPoint,d=c(e.borderRadius),s=t.plotWidth,o=t.plotHeight,N=e.center,l=D(N[0],s),r=D(N[1],o),h=D(e.width,s),p=D(e.height,o),g=D(e.neckWidth,s),u=D(e.neckHeight,o),x=r-p/2+p-u,b=i.points,V=k(d.radius,h),f=d.scope,_=+("left"===e.dataLabels.position),L=t=>{let e=Math.tan(t/2),a=Math.cos(P),i=Math.sin(P),d=V,s=d/e,o=Math.tan((Math.PI-t)/3.2104);return s>O&&(d=(s=O)*e),{dx:[s*a,(s-(o*=d))*a,s-o,s],dy:[s*i,(s-o)*i,s-o,s].map(t=>n?-t:t)}},v=0,z=0,W,A,I,P,O,w,H,B,Y,S,T,j;for(var X of(i.getWidthAt=function(t){var e=r-p/2;return t>x||p===u?g:g+(h-g)*(1-(t-e)/(p-u))},i.getX=function(t,e,a){return l+(e?-1:1)*(i.getWidthAt(n?2*r-t:t)/2+(a.dataLabel?.dataLabelPosition?.distance??k(this.options.dataLabels?.distance||0,h)))},i.center=[l,r,p],i.centerX=l,b))!X.y||!X.isValid()||a&&!1===X.visible||(v+=X.y);for(var E of b){if(j=null,I=v?E.y/v:0,S=(H=r-p/2+z*p)+I*p,B=(w=l-(W=i.getWidthAt(H))/2)+W,T=(Y=l-(W=i.getWidthAt(S))/2)+W,m(H)>=x?(w=Y=l-g/2,B=T=l+g/2):S>x&&(j=S,T=(Y=l-(W=i.getWidthAt(x))/2)+W,S=x),n&&(H=2*r-H,S=2*r-S,null!==j&&(j=2*r-j)),!V||"point"!==f&&0!==E.index&&E.index!==b.length-1&&null===j)A=[["M",w,H],["L",B,H],["L",T,S]],null!==j&&A.push(["L",T,j],["L",Y,j]),A.push(["L",Y,S]);else{var R=Math.abs(S-H),q=B-T,F=T-Y,U=Math.sqrt(q*q+R*R);P=Math.atan(0!=q?R/q:1/0),O=U/2,null!==j&&(O=Math.min(O,Math.abs(j-S)/2)),1<=F&&(O=Math.min(O,F/2));let t=L(P);A="stack"===f&&0!==E.index?[["M",w,H],["L",B,H]]:[["M",w+t.dx[0],H+t.dy[0]],["C",w+t.dx[1],H+t.dy[1],w+t.dx[2],H,w+t.dx[3],H],["L",B-t.dx[3],H],["C",B-t.dx[2],H,B-t.dx[1],H+t.dy[1],B-t.dx[0],H+t.dy[0]]],null!==j?(R=L(Math.PI/2),t=L(Math.PI/2+P),A.push(["L",T+t.dx[0],S-t.dy[0]],["C",T+t.dx[1],S-t.dy[1],T,S+t.dy[2],T,S+t.dy[3]]),"stack"===f&&E.index!==b.length-1?A.push(["L",T,j],["L",Y,j]):A.push(["L",T,j-R.dy[3]],["C",T,j-R.dy[2],T-R.dx[2],j,T-R.dx[3],j],["L",Y+R.dx[3],j],["C",Y+R.dx[2],j,Y,j-R.dy[2],Y,j-R.dy[3]]),A.push(["L",Y,S+t.dy[3]],["C",Y,S+t.dy[2],Y-t.dx[1],S-t.dy[1],Y-t.dx[0],S-t.dy[0]])):1<=F?(t=L(Math.PI-P),"stack"===f&&0===E.index?A.push(["L",T,S],["L",Y,S]):A.push(["L",T+t.dx[0],S-t.dy[0]],["C",T+t.dx[1],S-t.dy[1],T-t.dx[2],S,T-t.dx[3],S],["L",Y+t.dx[3],S],["C",Y+t.dx[2],S,Y-t.dx[1],S-t.dy[1],Y-t.dx[0],S-t.dy[0]])):(t=L(Math.PI-2*P),A.push(["L",Y+t.dx[0],S-t.dy[0]],["C",Y+t.dx[1],S-t.dy[1],Y-t.dx[1],S-t.dy[1],Y-t.dx[0],S-t.dy[0]]))}A.push(["Z"]),E.shapeType="path",E.shapeArgs={d:A},E.percentage=100*I,E.plotX=l,E.plotY=(H+(j||S))/2,E.tooltipPos=[l,E.plotY],E.dlBox={x:Y,y:H,topWidth:B-w,bottomWidth:T-Y,height:Math.abs(C(j,S)-H),width:NaN},E.slice=y,E.half=_,!E.isValid()||a&&!1===E.visible||(z+=I)}M(i,"afterTranslate")}sortByAngle(t){t.sort((t,e)=>t.plotY-e.plotY)}}I.defaultOptions=A(f.defaultOptions,{animation:!1,borderRadius:0,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,size:!0,dataLabels:{connectorWidth:1,verticalAlign:"middle"},states:{select:{color:"#cccccc",borderColor:"#000000"}}}),v(I.prototype,{animate:y}),function(){function e(){for(var e of this.series){let t=e.options&&e.options.dataLabels;W(t)&&(t=t[0]),e.is("pie")&&e.placeDataLabels&&t&&!t.inside&&e.placeDataLabels()}}(I||(I={})).compose=function(t){P(x,"FunnelSeries")&&L(t,"afterHideAllOverlappingLabels",e)}}(),g().registerSeriesType("funnel",I);let H=I,Y=i()["merge"];class B extends H{}B.defaultOptions=Y(H.defaultOptions,{neckHeight:"0%",neckWidth:"0%",reversed:!0}),g().registerSeriesType("pyramid",B);let S=i(),T=(H.compose(S.Chart),i());export{T as default};