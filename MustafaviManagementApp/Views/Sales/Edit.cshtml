@model MedicineStore.Models.Sale
@{
    ViewData["Title"] = "Edit Sale";
}

<h2>Sale</h2>

<form asp-action="Edit" method="post">
    <input type="hidden" asp-for="SaleId" />

    <div class="row">
        <div class="col-md-6">
            <!-- Customer -->
            <div class="form-group mb-3">
                <label asp-for="CustomerId">Customer</label>
                <select asp-for="CustomerId" class="form-control"
                        asp-items="@(ViewBag.Customers as SelectList)">
                    <option value="">-- Walk-in --</option>
                </select>
                <span asp-validation-for="CustomerId" class="text-danger"></span>
            </div>

            <!-- Staff -->
            <div class="form-group mb-3">
                <label asp-for="StaffId">Staff</label>
                <select asp-for="StaffId" class="form-control"
                        asp-items="@(ViewBag.Staffs as SelectList)">
                    <option value="">-- Select --</option>
                </select>
                <span asp-validation-for="StaffId" class="text-danger"></span>
            </div>

            <!-- Sale Date -->
            <div class="form-group mb-3">
                <label asp-for="SaleDate"></label>
                <input asp-for="SaleDate" class="form-control" type="datetime-local" />
                <span asp-validation-for="SaleDate" class="text-danger"></span>
            </div>

            <!-- Payment Method -->
            <div class="form-group mb-3">
                <label asp-for="PaymentMethod"></label>
                <select asp-for="PaymentMethod" class="form-control">
                    <option>Cash</option>
                    <option>Card</option>
                    <option>Insurance</option>
                    <option>Other</option>
                </select>
                <span asp-validation-for="PaymentMethod" class="text-danger"></span>
            </div>

            <!-- Payment Status -->
            <div class="form-group mb-3">
                <label asp-for="PaymentStatus"></label>
                <select asp-for="PaymentStatus" class="form-control">
                    <option>Pending</option>
                    <option>Paid</option>
                </select>
                <span asp-validation-for="PaymentStatus" class="text-danger"></span>
            </div>
        </div>

        <div class="col-md-6">
            <!-- Total Before Discount -->
            <div class="form-group mb-3">
                <label asp-for="TotalAmountBeforDiscount">Total Before Discount</label>
                <input asp-for="TotalAmountBeforDiscount" class="form-control" />
                <span asp-validation-for="TotalAmountBeforDiscount" class="text-danger"></span>
            </div>

            <!-- Total Before VAT -->
            <div class="form-group mb-3">
                <label asp-for="TotalAmountBeforVAT">Total Before VAT</label>
                <input asp-for="TotalAmountBeforVAT" class="form-control" />
                <span asp-validation-for="TotalAmountBeforVAT" class="text-danger"></span>
            </div>

            <!-- Final Total -->
            <div class="form-group mb-3">
                <label asp-for="TotalAmount">Grand Total</label>
                <input asp-for="TotalAmount" class="form-control" />
                <span asp-validation-for="TotalAmount" class="text-danger"></span>
            </div>

            <!-- Discount -->
            <div class="form-group mb-3">
                <label asp-for="Discount">Discount</label>
                <input asp-for="Discount" class="form-control" />
                <span asp-validation-for="Discount" class="text-danger"></span>
            </div>
        </div>

        @* …your existing <form>…</form> *@

        @* embed all the line‐items for this sale: *@
        @await Component.InvokeAsync("SaleDetails", new { saleId = Model.SaleId })

    </div>

    <button type="submit" class="btn btn-primary">Save Changes</button>
    <a asp-action="Index" class="btn btn-link">Cancel</a>
</form>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
