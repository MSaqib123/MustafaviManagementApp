@model MedicineStore.Models.Purchase
@{
    ViewData["Title"] = "Purchase Details";
}

<h2>Purchase Details</h2>

<div class="card p-3 mb-3">
    <dl class="row">
        <dt class="col-sm-2">Purchase Id</dt>
        <dd class="col-sm-10">@Model.PurchaseId</dd>

        <dt class="col-sm-2">Supplier</dt>
        <dd class="col-sm-10">@Model.Supplier?.SupplierName</dd>

        <dt class="col-sm-2">Staff</dt>
        <dd class="col-sm-10">@Model.Staff.StaffName</dd>

        <dt class="col-sm-2">Date</dt>
        <dd class="col-sm-10">@Model.PurchaseDate.ToString("g")</dd>

        <dt class="col-sm-2">Payment Status</dt>
        <dd class="col-sm-10">@Model.PaymentStatus</dd>

        <dt class="col-sm-2">Notes</dt>
        <dd class="col-sm-10">@Model.Notes</dd>

        <dt class="col-sm-2">Created At</dt>
        <dd class="col-sm-10">@Model.CreatedAt</dd>

        <dt class="col-sm-2">Updated At</dt>
        <dd class="col-sm-10">@Model.UpdatedAt</dd>
    </dl>
</div>

<h4>Line Items</h4>
<table class="table table-bordered">
    <thead>
        <tr>
            <th>Medicine</th>
            <th>Batch Number</th>
            <th>Expiry Date</th>
            <th>Quantity</th>
            <th>Cost Price</th>
            <th>Discount</th>
            <th>SubTotal</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var d in Model.PurchaseDetails)
        {
            <tr>
                <td>@d.Medicine?.MedicineName</td>
                <td>@d.BatchNumber</td>
                <td>@d.ExpiryDate?.ToShortDateString()</td>
                <td>@d.Quantity</td>
                <td>@d.CostPrice.ToString("F2")</td>
                <td>@d.Discount.ToString("F2")</td>
                <td>@((d.Quantity * d.CostPrice - d.Discount).ToString("F2"))</td>
            </tr>
        }
    </tbody>
</table>

<p>
    <a asp-action="Edit" asp-route-id="@Model.PurchaseId" class="btn btn-secondary">Edit</a>
    <a asp-action="Index" class="btn btn-link">Back to List</a>
</p>
